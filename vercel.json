{
    "version": 2,
    "builds": [
      { 
        "src": "server/index.js", 
        "use": "@vercel/node" 
      },
      { 
        "src": "package.json", 
        "use": "@vercel/static-build", 
        "config": { 
          "distDir": "dist" 
        } 
      }
    ],
    "routes": [
      { 
        "src": "/post/(?<id>[^/]+)", 
        "dest": "/server",
        "headers": { "Cache-Control": "public, max-age=0, must-revalidate" }
      },
      { 
        "src": "/api/(.*)", 
        "dest": "/server"
      },
      { 
        "src": "/uploads/(.*)", 
        "dest": "/server",
        "headers": { "Cache-Control": "public, max-age=31536000, immutable" }
      },
      { 
        "src": "^/static/(.*)",
        "dest": "/static/$1",
        "headers": { "Cache-Control": "public, max-age=31536000, immutable" }
      },
      { 
        "src": "^/assets/(.*)",
        "dest": "/assets/$1",
        "headers": { "Cache-Control": "public, max-age=31536000, immutable" }
      },
      {
        "src": "^/(.*)",
        "dest": "/index.html"
      }
    ]
  }